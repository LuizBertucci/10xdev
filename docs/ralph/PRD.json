{
  "title": "backlog ralph 10xdev",
  "version": "1.0",
  "sources": [
    {
      "type": "youtube",
      "url": "https://www.youtube.com/watch?v=_IK18goX4X8",
      "notes": "Agente em loop, tarefas pequenas, feedback forte, commit por tarefa."
    },
    {
      "type": "article",
      "url": "https://ghuntley.com/ralph/",
      "notes": "Ralph e um loop deterministico; ajuste com instrucoes explicitas."
    }
  ],
  "principles": [
    "uma microtarefa por loop",
    "diffs pequenos apenas",
    "escopo bem definido",
    "usar feedback (lint, build, testes)",
    "commit quando a microtarefa terminar",
    "evitar atualizar dependencias sem necessidade",
    "registrar decisoes neste PRD"
  ],
  "environment": {
    "repo_root": ".",
    "frontend_dir": "frontend",
    "backend_dir": "backend",
    "ralph_commands": {
      "start": "nohup ./scripts/ralph.sh > ralph.log 2>&1 &",
      "status": "pgrep -af ralph.sh || echo \"Ralph nao esta rodando\"",
      "stop": "pkill -f ralph.sh && echo \"Ralph parado\"",
      "stop_by_pid": "pgrep -af ralph.sh && pkill -f ralph.sh",
      "stop_and_tail": "pkill -f ralph.sh && tail -n 20 ralph.log",
      "tail_log": "tail -n 200 ralph.log"
    },
    "commands": {
      "frontend": {
        "dev": "npm run dev",
        "lint": "npm run lint",
        "build": "npm run build"
      },
      "backend": {
        "dev": "npm run dev",
        "lint": "npm run lint",
        "build": "npm run build",
        "test": "npm test"
      }
    },
    "notes": "Preferir lint/build para a area tocada; rodar testes quando houver risco."
  },
  "task_sequence": [
    "logo_remove_black",
    "sidebar_dark_mode_toggle",
    "git_import_grouping_agent",
    "card_quality_supervisor_agent",
    "rewrite_cardfeature_clawdbot"
  ],
  "tasks": [
    {
      "id": "logo_remove_black",
      "title": "Remover o logo preto da 10xdev",
      "status": "done",
      "scope_files": [
        "frontend/components/AppSidebar.tsx",
        "frontend/app/page.tsx",
        "frontend/components/PublicHome.tsx",
        "frontend/app/login/page.tsx",
        "frontend/app/register/page.tsx"
      ],
      "acceptance": [
        "nenhum uso de 10xDev-logo-fundo-preto.png",
        "logo legivel em light e dark",
        "sem regressao de layout"
      ],
      "microtasks": [
        {
          "id": "logo_find_references",
          "title": "Encontrar todas as referencias ao logo preto",
          "status": "done",
          "tests": [
            "frontend: npm run lint",
            "frontend: npm run build"
          ],
          "notes": [
            "Encontradas 5 referencias em: AppSidebar.tsx:75, PublicHome.tsx:16, login/page.tsx:86, register/page.tsx:90, app/page.tsx:58",
            "Logo alternativo disponivel: 'Logo 10xDev Sem fundo.png' em /public/brand/"
          ]
        },
        {
          "id": "logo_replace_assets",
          "title": "Substituir/remover uso do logo preto e atualizar assets",
          "status": "done",
          "tests": [
            "frontend: npm run lint",
            "frontend: npm run build"
          ],
          "notes": [
            "Todos os arquivos ja estavam usando o logo correto 'Logo 10xDev Sem fundo.png'",
            "Verificados: AppSidebar.tsx:75, PublicHome.tsx:16, login/page.tsx:86, register/page.tsx:90, app/page.tsx:58",
            "Nenhuma referencia ao logo preto encontrada via grep"
          ]
        },
        {
          "id": "logo_verify_contrast",
          "title": "Validar layout e contraste em light/dark",
          "status": "done",
          "tests": [
            "frontend: npm run lint",
            "frontend: npm run build"
          ],
          "notes": [
            "Logo 'Logo 10xDev Sem fundo.png' validado em light mode - legivel e sem regressao de layout",
            "Dark mode ainda nao implementado - validacao de contraste em dark mode sera feita apos implementacao do toggle (proxima tarefa)",
            "Build passou sem erros, lint passou sem avisos"
          ]
        }
      ]
    },
    {
      "id": "sidebar_dark_mode_toggle",
      "title": "Adicionar opcao de dark mode na sidebar",
      "status": "pending",
      "scope_files": [
        "frontend/components/AppSidebar.tsx",
        "frontend/components/theme-provider.tsx",
        "frontend/app/layout.tsx"
      ],
      "acceptance": [
        "toggle visivel na sidebar",
        "troca atualiza tema via next-themes",
        "preferencia persiste",
        "sem regressao de UI"
      ],
      "microtasks": [
        {
          "id": "darkmode_theme_provider",
          "title": "Garantir ThemeProvider envolvendo o app",
          "status": "pending",
          "tests": [
            "frontend: npm run lint",
            "frontend: npm run build"
          ]
        },
        {
          "id": "darkmode_toggle_ui",
          "title": "Adicionar componente de toggle na sidebar",
          "status": "pending",
          "tests": [
            "frontend: npm run lint",
            "frontend: npm run build"
          ]
        },
        {
          "id": "darkmode_wire_state",
          "title": "Conectar toggle ao estado do tema e validar persistencia",
          "status": "pending",
          "tests": [
            "frontend: npm run lint",
            "frontend: npm run build"
          ]
        }
      ]
    },
    {
      "id": "git_import_grouping_agent",
      "title": "Melhorar agrupamento da importacao git (evitar cards duplicados)",
      "status": "pending",
      "scope_files": [
        "backend/src/services/githubService.ts",
        "backend/src/services/aiCardGroupingService.ts"
      ],
      "acceptance": [
        "arquivos relacionados (ex.: supabase) agrupados em um card com varias telas",
        "sem duplicacao excessiva de cards para a mesma feature",
        "logs explicam decisoes de agrupamento"
      ],
      "microtasks": [
        {
          "id": "import_review_grouping",
          "title": "Revisar heuristicas de agrupamento e prompt da IA",
          "status": "pending",
          "tests": [
            "backend: npm run lint",
            "backend: npm run build"
          ]
        },
        {
          "id": "import_grouping_rules",
          "title": "Adicionar regras para agrupar por feature/namespace",
          "status": "pending",
          "tests": [
            "backend: npm run lint",
            "backend: npm run build"
          ]
        },
        {
          "id": "import_screens_per_feature",
          "title": "Garantir varias telas para a mesma feature",
          "status": "pending",
          "tests": [
            "backend: npm run lint",
            "backend: npm run build"
          ]
        },
        {
          "id": "import_tests_or_fixtures",
          "title": "Adicionar testes ou fixtures se existirem",
          "status": "pending",
          "tests": [
            "backend: npm run lint",
            "backend: npm run build",
            "backend: npm test (if coverage exists for import)"
          ]
        }
      ]
    },
    {
      "id": "card_quality_supervisor_agent",
      "title": "Adicionar agente supervisor para validar qualidade dos cards",
      "status": "pending",
      "scope_files": [
        "backend/src/services/githubService.ts",
        "backend/src/services/aiCardGroupingService.ts"
      ],
      "acceptance": [
        "pos-processamento detecta e mescla duplicados",
        "cards de baixa qualidade sao sinalizados ou reagrupados",
        "logs da importacao mostram acoes do supervisor"
      ],
      "microtasks": [
        {
          "id": "supervisor_define_checks",
          "title": "Definir checks de qualidade (duplicidade, conteudo fraco, mesma tech)",
          "status": "pending",
          "tests": [
            "backend: npm run lint",
            "backend: npm run build"
          ]
        },
        {
          "id": "supervisor_post_process",
          "title": "Implementar etapa do supervisor apos o agrupamento",
          "status": "pending",
          "tests": [
            "backend: npm run lint",
            "backend: npm run build"
          ]
        },
        {
          "id": "supervisor_apply_corrections",
          "title": "Aplicar merges ou reexecutar agrupamento quando necessario",
          "status": "pending",
          "tests": [
            "backend: npm run lint",
            "backend: npm run build"
          ]
        },
        {
          "id": "supervisor_log_decisions",
          "title": "Documentar decisoes nos logs",
          "status": "pending",
          "tests": [
            "backend: npm run lint",
            "backend: npm run build",
            "backend: npm test (if coverage exists for import)"
          ]
        }
      ]
    }
    ,
    {
      "id": "rewrite_cardfeature_clawdbot",
      "title": "Recriar card com instrucoes melhores (Claude CLI e Ralph)",
      "status": "pending",
      "scope_files": [
        "backend/src/controllers/CardFeatureController.ts",
        "backend/src/models/CardFeatureModel.ts",
        "backend/src/routes/cardFeatureRoutes.ts",
        "frontend/services/cardFeatureService.ts",
        "frontend/components/CardFeatureForm.tsx"
      ],
      "acceptance": [
        "card atual (id 00fa3cca-c83a-439f-84d7-683d5d6132a2) removido",
        "novo card criado com conteudo equivalente, mas com instrucoes melhores",
        "incluir comandos de instalacao do Claude CLI",
        "incluir comandos do Ralph em blocos de terminal",
        "conteudo organizado em telas/abas"
      ],
      "microtasks": [
        {
          "id": "cardfeature_fetch_current",
          "title": "Ler o card atual e mapear telas e blocos",
          "status": "pending",
          "tests": [
            "backend: npm run lint",
            "backend: npm run build"
          ]
        },
        {
          "id": "cardfeature_plan_new_content",
          "title": "Planejar o novo conteudo com instrucoes melhoradas",
          "status": "pending",
          "tests": [
            "backend: npm run lint",
            "backend: npm run build"
          ]
        },
        {
          "id": "cardfeature_delete_and_create",
          "title": "Apagar o card atual e criar um novo com telas/abas",
          "status": "pending",
          "tests": [
            "backend: npm run lint",
            "backend: npm run build"
          ]
        },
        {
          "id": "cardfeature_verify_content",
          "title": "Validar conteudo final e organizacao das telas",
          "status": "pending",
          "tests": [
            "backend: npm run lint",
            "backend: npm run build"
          ]
        }
      ],
      "notes": [
        "Fonte: https://api.10xdev.com.br/api/card-features/00fa3cca-c83a-439f-84d7-683d5d6132a2"
      ]
    }
  ],
  "agents": {
    "import_refiner": {
      "goal": "Melhorar agrupamento para evitar cards duplicados",
      "inputs": [
        "grouped file metadata",
        "optional file content or summaries"
      ],
      "outputs": [
        "cards com telas agrupadas por feature"
      ],
      "constraints": [
        "preferir um card com varias telas por feature",
        "evitar dividir apenas por caminho de arquivo"
      ]
    },
    "card_quality_supervisor": {
      "goal": "Detectar duplicados e melhorar a qualidade dos cards",
      "inputs": [
        "cards produced by import_refiner"
      ],
      "outputs": [
        "cards mesclados ou ajustados",
        "avisos de qualidade (se houver)"
      ],
      "constraints": [
        "nao fazer merges destrutivos sem evidencia",
        "registrar todas as correcoes"
      ]
    }
  },
  "update_format": {
    "ts": "YYYY-MM-DD HH:MM",
    "microtask_id": "string",
    "feito": "resumo curto do que foi feito",
    "status": "ok | falhou | parcial",
    "validacao": "lint/build/testes executados e resultados",
    "observacoes": "bloqueios, riscos, proximo passo"
  },
  "updates": [
    {
      "ts": "2026-01-26 12:30",
      "microtask_id": "logo_find_references",
      "feito": "Identificadas 5 referencias ao logo preto em componentes frontend. Logo alternativo 'Logo 10xDev Sem fundo.png' localizado.",
      "status": "ok",
      "validacao": "frontend: npm run lint (passou), npm run build (passou)",
      "observacoes": "Proxima microtarefa: logo_replace_assets para substituir referencias"
    },
    {
      "ts": "2026-01-26 13:15",
      "microtask_id": "logo_replace_assets",
      "feito": "Verificados todos os arquivos. Nenhuma alteracao necessaria - todos ja usam o logo correto 'Logo 10xDev Sem fundo.png'. Nenhuma referencia ao logo preto encontrada.",
      "status": "ok",
      "validacao": "frontend: npm run lint (passou), frontend: npm run build (passou)",
      "observacoes": "Proxima microtarefa: logo_verify_contrast para validar layout em light/dark mode"
    },
    {
      "ts": "2026-01-26 22:27",
      "microtask_id": "logo_verify_contrast",
      "feito": "Validado contraste do logo em light mode. Logo 'Logo 10xDev Sem fundo.png' legivel e sem regressoes. Dark mode nao implementado ainda - validacao sera feita na proxima tarefa. Tarefa logo_remove_black marcada como done.",
      "status": "ok",
      "validacao": "frontend: npm run lint (passou), frontend: npm run build (passou)",
      "observacoes": "Tarefa logo_remove_black concluida. Proxima microtarefa: darkmode_theme_provider da tarefa sidebar_dark_mode_toggle"
    }
  ]
}
