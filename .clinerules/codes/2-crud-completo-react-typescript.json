{
  "id": "2",
  "title": "CRUD Completo React + TypeScript",
  "tech": "React",
  "language": "typescript",
  "description": "Sistema CRUD completo com hooks customizados e componentes reutilizáveis",
  "content_type": "code",
  "card_type": "codigos",
  "screens": [
    {
      "name": "Hook",
      "description": "Hook customizado para operações CRUD",
      "route": "cards/2/hook",
      "order": 0,
      "blocks": [
        {
          "id": "46399254-c099-4771-9c39-a59a6820dd09",
          "type": "code",
          "title": "Hook",
          "language": "typescript",
          "order": 0,
          "content": "import { useState, useEffect, useCallback } from 'react';\n\n        interface CrudItem {\n          id: string;\n          [key: string]: any;\n        }\n\n        interface UseCrudOptions<T> {\n          apiUrl: string;\n          initialData?: T[];\n        }\n\n        export function useCrud<T extends CrudItem>({\n          apiUrl, \n          initialData = [] \n        }: UseCrudOptions<T>) {\n          const [items, setItems] = useState<T[]>(initialData);\n          const [loading, setLoading] = useState(false);\n          const [error, setError] = useState<string | null>(null);\n\n          const fetchItems = useCallback(async () => {\n            setLoading(true);\n            setError(null);\n            try {\n              const response = await fetch(apiUrl);\n              if (!response.ok) throw new Error('Erro ao buscar dados');\n              const data = await response.json();\n              setItems(data);\n            } catch (err) {\n              setError(err instanceof Error ? err.message : 'Erro desconhecido');\n            } finally {\n              setLoading(false);\n            }\n          }, [apiUrl]);\n\n          const createItem = useCallback(async (newItem: Omit<T, 'id'>) => {\n            setLoading(true);\n            setError(null);\n            try {\n              const response = await fetch(apiUrl, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(newItem),\n              });\n              if (!response.ok) throw new Error('Erro ao criar item');\n              const createdItem = await response.json();\n              setItems(prev => [...prev, createdItem]);\n              return createdItem;\n            } catch (err) {\n              setError(err instanceof Error ? err.message : 'Erro desconhecido');\n              throw err;\n            } finally {\n              setLoading(false);\n            }\n          }, [apiUrl]);\n\n          const updateItem = useCallback(async (id: string, updates: Partial<T>) => {\n            setLoading(true);\n            setError(null);\n            try {\n              const response = await fetch(`${apiUrl}/${id}`, {\n                method: 'PUT',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(updates),\n              });\n              if (!response.ok) throw new Error('Erro ao atualizar item');\n              const updatedItem = await response.json();\n              setItems(prev => prev.map(item => item.id === id ? updatedItem : item));\n              return updatedItem;\n            } catch (err) {\n              setError(err instanceof Error ? err.message : 'Erro desconhecido');\n              throw err;\n            } finally {\n              setLoading(false);\n            }\n          }, [apiUrl]);\n\n          const deleteItem = useCallback(async (id: string) => {\n            setLoading(true);\n            setError(null);\n            try {\n              const response = await fetch(`${apiUrl}/${id}`, {\n                method: 'DELETE',\n              });\n              if (!response.ok) throw new Error('Erro ao deletar item');\n              setItems(prev => prev.filter(item => item.id !== id));\n            } catch (err) {\n              setError(err instanceof Error ? err.message : 'Erro desconhecido');\n              throw err;\n            } finally {\n              setLoading(false);\n            }\n          }, [apiUrl]);\n\n          useEffect(() => {\n            fetchItems();\n          }, [fetchItems]);\n\n          return {\n            items,\n            loading,\n            error,\n            createItem,\n            updateItem,\n            deleteItem,\n            refetch: fetchItems,\n          };\n        }"
        }
      ]
    },
    {
      "name": "Component",
      "description": "Componente principal da lista CRUD",
      "route": "cards/2/component",
      "order": 1,
      "blocks": [
        {
          "id": "a65e0a7c-5c88-4b2f-9235-3bd5e09e749c",
          "type": "code",
          "title": "Component",
          "language": "typescript",
          "order": 0,
          "content": "import React, { useState } from 'react';\n        import { useCrud } from './useCrud';\n\n        interface User {\n          id: string;\n          name: string;\n          email: string;\n          role: string;\n        }\n\n        export function UserList() {\n          const { items: users, loading, error, createItem, updateItem, deleteItem } = useCrud<User>({\n            apiUrl: '/api/users'\n          });\n          \n          const [editingUser, setEditingUser] = useState<User | null>(null);\n          const [showForm, setShowForm] = useState(false);\n\n          const handleSubmit = async (userData: Omit<User, 'id'>) => {\n            try {\n              if (editingUser) {\n                await updateItem(editingUser.id, userData);\n                setEditingUser(null);\n              } else {\n                await createItem(userData);\n              }\n              setShowForm(false);\n            } catch (error) {\n              console.error('Erro ao salvar usuário:', error);\n            }\n          };\n\n          const handleEdit = (user: User) => {\n            setEditingUser(user);\n            setShowForm(true);\n          };\n\n          const handleDelete = async (id: string) => {\n            if (window.confirm('Tem certeza que deseja deletar este usuário?')) {\n              try {\n                await deleteItem(id);\n              } catch (error) {\n                console.error('Erro ao deletar usuário:', error);\n              }\n            }\n          };\n\n          if (loading) return <div className=\"text-center p-4\">Carregando...</div>;\n          if (error) return <div className=\"text-red-500 p-4\">Erro: {error}</div>;\n\n          return (\n            <div className=\"p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h1 className=\"text-2xl font-bold\">Usuários</h1>\n                <button\n                  onClick={() => setShowForm(true)}\n                  className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n                >\n                  Novo Usuário\n                </button>\n              </div>\n\n              <div className=\"grid gap-4\">\n                {users.map((user) => (\n                  <div key={user.id} className=\"border rounded-lg p-4 flex justify-between items-center\">\n                    <div>\n                      <h3 className=\"font-semibold\">{user.name}</h3>\n                      <p className=\"text-gray-600\">{user.email}</p>\n                      <span className=\"text-sm bg-gray-100 px-2 py-1 rounded\">{user.role}</span>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <button\n                        onClick={() => handleEdit(user)}\n                        className=\"text-blue-500 hover:text-blue-700\"\n                      >\n                        Editar\n                      </button>\n                      <button\n                        onClick={() => handleDelete(user.id)}\n                        className=\"text-red-500 hover:text-red-700\"\n                      >\n                        Deletar\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {showForm && (\n                <UserForm\n                  user={editingUser}\n                  onSubmit={handleSubmit}\n                  onCancel={() => {\n                    setShowForm(false);\n                    setEditingUser(null);\n                  }}\n                />\n              )}\n            </div>\n          );\n        }"
        }
      ]
    },
    {
      "name": "Form",
      "description": "Formulário reutilizável para criar/editar",
      "route": "cards/2/form",
      "order": 2,
      "blocks": [
        {
          "id": "1cabbce6-8057-4f19-9d87-cb507a2da5c6",
          "type": "code",
          "title": "Form",
          "language": "typescript",
          "order": 0,
          "content": "import React, { useState, useEffect } from 'react';\n\n        interface User {\n          id: string;\n          name: string;\n          email: string;\n          role: string;\n        }\n\n        interface UserFormProps {\n          user?: User | null;\n          onSubmit: (userData: Omit<User, 'id'>) => void;\n          onCancel: () => void;\n        }\n\n        export function UserForm({ user, onSubmit, onCancel }: UserFormProps) {\n          const [formData, setFormData] = useState({\n            name: '',\n            email: '',\n            role: 'user'\n          });\n\n          const [errors, setErrors] = useState<Record<string, string>>({});\n\n          useEffect(() => {\n            if (user) {\n              setFormData({\n                name: user.name,\n                email: user.email,\n                role: user.role\n              });\n            }\n          }, [user]);\n\n          const validateForm = () => {\n            const newErrors: Record<string, string> = {};\n\n            if (!formData.name.trim()) {\n              newErrors.name = 'Nome é obrigatório';\n            }\n\n            if (!formData.email.trim()) {\n              newErrors.email = 'Email é obrigatório';\n            } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\n              newErrors.email = 'Email inválido';\n            }\n\n            if (!formData.role) {\n              newErrors.role = 'Role é obrigatório';\n            }\n\n            setErrors(newErrors);\n            return Object.keys(newErrors).length === 0;\n          };\n\n          const handleSubmit = (e: React.FormEvent) => {\n            e.preventDefault();\n            if (validateForm()) {\n              onSubmit(formData);\n            }\n          };\n\n          const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n            const { name, value } = e.target;\n            setFormData(prev => ({ ...prev, [name]: value }));\n            // Limpar erro do campo quando o usuário começar a digitar\n            if (errors[name]) {\n              setErrors(prev => ({ ...prev, [name]: '' }));\n            }\n          };\n\n          return (\n            <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center\">\n              <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n                <h2 className=\"text-xl font-bold mb-4\">\n                  {user ? 'Editar Usuário' : 'Novo Usuário'}\n                </h2>\n\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium mb-1\">Nome</label>\n                    <input\n                      type=\"text\"\n                      name=\"name\"\n                      value={formData.name}\n                      onChange={handleChange}\n                      className={`w-full border rounded px-3 py-2 ${errors.name ? 'border-red-500' : 'border-gray-300'}`}\n                    />\n                    {errors.name && <p className=\"text-red-500 text-sm mt-1\">{errors.name}</p>}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium mb-1\">Email</label>\n                    <input\n                      type=\"email\"\n                      name=\"email\"\n                      value={formData.email}\n                      onChange={handleChange}\n                      className={`w-full border rounded px-3 py-2 ${errors.email ? 'border-red-500' : 'border-gray-300'}`}\n                    />\n                    {errors.email && <p className=\"text-red-500 text-sm mt-1\">{errors.email}</p>}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium mb-1\">Role</label>\n                    <select\n                      name=\"role\"\n                      value={formData.role}\n                      onChange={handleChange}\n                      className={`w-full border rounded px-3 py-2 ${errors.role ? 'border-red-500' : 'border-gray-300'}`}\n                    >\n                      <option value=\"user\">Usuário</option>\n                      <option value=\"admin\">Administrador</option>\n                      <option value=\"moderator\">Moderador</option>\n                    </select>\n                    {errors.role && <p className=\"text-red-500 text-sm mt-1\">{errors.role}</p>}\n                  </div>\n\n                  <div className=\"flex gap-2 pt-4\">\n                    <button\n                      type=\"submit\"\n                      className=\"flex-1 bg-blue-500 text-white py-2 rounded hover:bg-blue-600\"\n                    >\n                      {user ? 'Atualizar' : 'Criar'}\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={onCancel}\n                      className=\"flex-1 bg-gray-300 text-gray-700 py-2 rounded hover:bg-gray-400\"\n                    >\n                      Cancelar\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          );\n        }"
        }
      ]
    }
  ]
}