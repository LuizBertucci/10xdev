---
description: Padrão para organizar commits e push de alterações pendentes
alwaysApply: true
---

# Git Commit & Push Workflow

**Nunca commite automaticamente.** Só commite quando o usuário pedir explicitamente (ex: "commita", "pode subir", "sobe", "commit", "push").
Quando o usuário pedir, siga este fluxo:

## 1. Analisar alterações pendentes

- Rode `git status` e `git diff --stat` para listar todos os arquivos modificados
- Rode `git diff` por grupo de arquivos para entender cada mudança

## 2. Agrupar por responsabilidade

Separe as alterações em commits lógicos, cada um com **uma única responsabilidade**:
- Agrupe arquivos que fazem parte da mesma feature/fix/refactor
- Nunca misture alterações de backend com frontend se forem de funcionalidades diferentes
- Nunca misture performance com feature nova

## 3. Apresentar tabela para aprovação

Antes de executar, apresente uma tabela ao usuário:

| # | Commit (título) | Arquivos | Descrição |
|---|-----------------|----------|-----------|
| 1 | `tipo: título curto` | arquivo1, arquivo2 | O que faz e por quê |

**Tipos de commit:** `feat`, `fix`, `perf`, `style`, `refactor`, `docs`, `chore`, `test`

Aguarde o "ok" do usuário antes de executar.

## 4. Executar commits na ordem

Cada commit usa HEREDOC com título + corpo descritivo:

```bash
git add arquivo1 arquivo2 && git commit -m "$(cat <<'EOF'
tipo: título curto em português

Descrição detalhada em 2-3 linhas explicando
o que foi feito e o motivo da alteração.
EOF
)"
```

## 5. Verificar e fazer push

- Rode `git status` + `git log --oneline` para confirmar
- **Faça o push automaticamente** logo após os commits
- Sempre perguntar antes de fazer `push --force`

## Regras

- Títulos de commit em **português**, lowercase, sem ponto final
- Corpo do commit em **português** com contexto útil
- Título deve ser o **mais descritivo possível** dentro do limite de ~72 caracteres
  - Bom: `perf: substituir chamadas individuais /access por cálculo local com useMemo`
  - Ruim: `perf: otimizar acesso`
- Sempre perguntar antes de fazer `push --force`
